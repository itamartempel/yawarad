basePath: /api
consumes:
- application/json
- application/xml
- application/gob
- application/x-gob
definitions:
  Branch-Request:
    description: A request (default view)
    example:
      branch_id: efbc33e6-ce47-4777-8acf-048f8aec5c61
      jira_ticket: DBS-38329
      request_id: 21759c00-370a-4db6-8793-6e5eaead825e
      request_type: extend_expration
      requestor: iisraelly@wix.com
      tasks:
      - description: At earum et dolorem ut mollitia impedit.
        end_at: "2013-05-05T14:26:02Z"
        id: 56cdf528-4812-4805-9419-6792c3100fe5
        last_log_message: Reiciendis ut aliquid culpa.
        name: Distinctio architecto consequatur magnam repudiandae maxime error.
        progress: 91
        seq: 1696058868987927013
        start_at: "1972-07-17T06:33:44Z"
        state: pendding
      - description: At earum et dolorem ut mollitia impedit.
        end_at: "2013-05-05T14:26:02Z"
        id: 56cdf528-4812-4805-9419-6792c3100fe5
        last_log_message: Reiciendis ut aliquid culpa.
        name: Distinctio architecto consequatur magnam repudiandae maxime error.
        progress: 91
        seq: 1696058868987927013
        start_at: "1972-07-17T06:33:44Z"
        state: pendding
    properties:
      branch_id:
        description: Branch id
        example: efbc33e6-ce47-4777-8acf-048f8aec5c61
        format: uuid
        type: string
      jira_ticket:
        description: The Jira ticket that related to this request
        example: DBS-38329
        type: string
      request_id:
        description: Request Id
        example: 21759c00-370a-4db6-8793-6e5eaead825e
        format: uuid
        type: string
      request_type:
        description: The request type
        enum:
        - create_branch
        - update_branch
        - extend_expration
        - expire_now
        example: extend_expration
        type: string
      requestor:
        description: The user that request the branch
        example: iisraelly@wix.com
        format: email
        type: string
      tasks:
        example:
        - description: At earum et dolorem ut mollitia impedit.
          end_at: "2013-05-05T14:26:02Z"
          id: 56cdf528-4812-4805-9419-6792c3100fe5
          last_log_message: Reiciendis ut aliquid culpa.
          name: Distinctio architecto consequatur magnam repudiandae maxime error.
          progress: 91
          seq: 1696058868987927013
          start_at: "1972-07-17T06:33:44Z"
          state: pendding
        - description: At earum et dolorem ut mollitia impedit.
          end_at: "2013-05-05T14:26:02Z"
          id: 56cdf528-4812-4805-9419-6792c3100fe5
          last_log_message: Reiciendis ut aliquid culpa.
          name: Distinctio architecto consequatur magnam repudiandae maxime error.
          progress: 91
          seq: 1696058868987927013
          start_at: "1972-07-17T06:33:44Z"
          state: pendding
        items:
          $ref: '#/definitions/Branch-Request-Task'
        type: array
    title: 'Mediatype identifier: application/vnd.branch-request+json; view=default'
    type: object
  Branch-Request-Task:
    description: A sigle task of operation (default view)
    example:
      description: At earum et dolorem ut mollitia impedit.
      end_at: "2013-05-05T14:26:02Z"
      id: 56cdf528-4812-4805-9419-6792c3100fe5
      last_log_message: Reiciendis ut aliquid culpa.
      name: Distinctio architecto consequatur magnam repudiandae maxime error.
      progress: 91
      seq: 1696058868987927013
      start_at: "1972-07-17T06:33:44Z"
      state: pendding
    properties:
      description:
        description: The description of the task
        example: At earum et dolorem ut mollitia impedit.
        type: string
      end_at:
        description: The time that the task was ended
        example: "2013-05-05T14:26:02Z"
        format: date-time
        type: string
      id:
        description: Request task Id
        example: 56cdf528-4812-4805-9419-6792c3100fe5
        format: uuid
        type: string
      last_log_message:
        description: The last log messages
        example: Reiciendis ut aliquid culpa.
        type: string
      name:
        description: The task name
        example: Distinctio architecto consequatur magnam repudiandae maxime error.
        type: string
      progress:
        default: 0
        description: The progress of this task in presentage
        example: 91
        maximum: 100
        minimum: 0
        type: integer
      seq:
        description: The sequence order position of this specific task
        example: 1696058868987927013
        format: int64
        type: integer
      start_at:
        description: The time that the task was started
        example: "1972-07-17T06:33:44Z"
        format: date-time
        type: string
      state:
        default: pendding
        description: The state of the current task
        enum:
        - pendding
        - running
        - finish_successfully
        - failed
        example: pendding
        type: string
    title: 'Mediatype identifier: application/vnd.branch-request-task+json; view=default'
    type: object
  Branch-Request-TaskCollection:
    description: Branch-Request-TaskCollection is the media type for an array of Branch-Request-Task
      (default view)
    example:
    - description: At earum et dolorem ut mollitia impedit.
      end_at: "2013-05-05T14:26:02Z"
      id: 56cdf528-4812-4805-9419-6792c3100fe5
      last_log_message: Reiciendis ut aliquid culpa.
      name: Distinctio architecto consequatur magnam repudiandae maxime error.
      progress: 91
      seq: 1696058868987927013
      start_at: "1972-07-17T06:33:44Z"
      state: pendding
    - description: At earum et dolorem ut mollitia impedit.
      end_at: "2013-05-05T14:26:02Z"
      id: 56cdf528-4812-4805-9419-6792c3100fe5
      last_log_message: Reiciendis ut aliquid culpa.
      name: Distinctio architecto consequatur magnam repudiandae maxime error.
      progress: 91
      seq: 1696058868987927013
      start_at: "1972-07-17T06:33:44Z"
      state: pendding
    items:
      $ref: '#/definitions/Branch-Request-Task'
    title: 'Mediatype identifier: application/vnd.branch-request-task+json; type=collection;
      view=default'
    type: array
  Branch-RequestCollection:
    description: Branch-RequestCollection is the media type for an array of Branch-Request
      (default view)
    example:
    - branch_id: efbc33e6-ce47-4777-8acf-048f8aec5c61
      jira_ticket: DBS-38329
      request_id: 21759c00-370a-4db6-8793-6e5eaead825e
      request_type: extend_expration
      requestor: iisraelly@wix.com
      tasks:
      - description: At earum et dolorem ut mollitia impedit.
        end_at: "2013-05-05T14:26:02Z"
        id: 56cdf528-4812-4805-9419-6792c3100fe5
        last_log_message: Reiciendis ut aliquid culpa.
        name: Distinctio architecto consequatur magnam repudiandae maxime error.
        progress: 91
        seq: 1696058868987927013
        start_at: "1972-07-17T06:33:44Z"
        state: pendding
      - description: At earum et dolorem ut mollitia impedit.
        end_at: "2013-05-05T14:26:02Z"
        id: 56cdf528-4812-4805-9419-6792c3100fe5
        last_log_message: Reiciendis ut aliquid culpa.
        name: Distinctio architecto consequatur magnam repudiandae maxime error.
        progress: 91
        seq: 1696058868987927013
        start_at: "1972-07-17T06:33:44Z"
        state: pendding
    - branch_id: efbc33e6-ce47-4777-8acf-048f8aec5c61
      jira_ticket: DBS-38329
      request_id: 21759c00-370a-4db6-8793-6e5eaead825e
      request_type: extend_expration
      requestor: iisraelly@wix.com
      tasks:
      - description: At earum et dolorem ut mollitia impedit.
        end_at: "2013-05-05T14:26:02Z"
        id: 56cdf528-4812-4805-9419-6792c3100fe5
        last_log_message: Reiciendis ut aliquid culpa.
        name: Distinctio architecto consequatur magnam repudiandae maxime error.
        progress: 91
        seq: 1696058868987927013
        start_at: "1972-07-17T06:33:44Z"
        state: pendding
      - description: At earum et dolorem ut mollitia impedit.
        end_at: "2013-05-05T14:26:02Z"
        id: 56cdf528-4812-4805-9419-6792c3100fe5
        last_log_message: Reiciendis ut aliquid culpa.
        name: Distinctio architecto consequatur magnam repudiandae maxime error.
        progress: 91
        seq: 1696058868987927013
        start_at: "1972-07-17T06:33:44Z"
        state: pendding
    - branch_id: efbc33e6-ce47-4777-8acf-048f8aec5c61
      jira_ticket: DBS-38329
      request_id: 21759c00-370a-4db6-8793-6e5eaead825e
      request_type: extend_expration
      requestor: iisraelly@wix.com
      tasks:
      - description: At earum et dolorem ut mollitia impedit.
        end_at: "2013-05-05T14:26:02Z"
        id: 56cdf528-4812-4805-9419-6792c3100fe5
        last_log_message: Reiciendis ut aliquid culpa.
        name: Distinctio architecto consequatur magnam repudiandae maxime error.
        progress: 91
        seq: 1696058868987927013
        start_at: "1972-07-17T06:33:44Z"
        state: pendding
      - description: At earum et dolorem ut mollitia impedit.
        end_at: "2013-05-05T14:26:02Z"
        id: 56cdf528-4812-4805-9419-6792c3100fe5
        last_log_message: Reiciendis ut aliquid culpa.
        name: Distinctio architecto consequatur magnam repudiandae maxime error.
        progress: 91
        seq: 1696058868987927013
        start_at: "1972-07-17T06:33:44Z"
        state: pendding
    items:
      $ref: '#/definitions/Branch-Request'
    title: 'Mediatype identifier: application/vnd.branch-request+json; type=collection;
      view=default'
    type: array
  Cluster-Branch:
    description: A single cluster branch (default view)
    example:
      cluster_name: my_cluster
      created_at: "2010-03-21T03:32:39Z"
      expire_at: "2014-06-01T11:43:01Z"
      id: d28cebfe-0faa-4c36-b0a2-fd1b1dace173
      rollforword_till: "2008-01-14T09:10:38Z"
      snapshot:
        class: OnVault
        cluster_name: my_cluster
        created_at: "1988-07-14T08:46:52Z"
        id: Image_4946347
        image_size_mb: 95367.4
        rollforword_till: "1977-04-09T00:50:17Z"
      status: grace
      team: Booking
      type: dev
    properties:
      cluster_name:
        description: Cluster name that the branch was created from
        example: my_cluster
        type: string
      created_at:
        description: The time that the branch was created
        example: "2010-03-21T03:32:39Z"
        format: date-time
        type: string
      expire_at:
        description: The time that the branch will expire
        example: "2014-06-01T11:43:01Z"
        format: date-time
        type: string
      id:
        description: Branch id
        example: d28cebfe-0faa-4c36-b0a2-fd1b1dace173
        format: uuid
        type: string
      rollforword_till:
        description: Till what point in time this branch was created
        example: "2008-01-14T09:10:38Z"
        format: date-time
        type: string
      snapshot:
        $ref: '#/definitions/Cluster-Snapshot'
      status:
        description: The status of the branch
        enum:
        - creating
        - updateing
        - active
        - grace
        - expired
        - deleted
        example: grace
        type: string
      team:
        description: The Team that this branch was created for
        example: Booking
        type: string
      type:
        description: The type of this branch
        enum:
        - dev
        - dr
        example: dev
        type: string
    title: 'Mediatype identifier: application/vnd.cluster-branch+json; view=default'
    type: object
  Cluster-BranchCollection:
    description: Cluster-BranchCollection is the media type for an array of Cluster-Branch
      (default view)
    example:
    - cluster_name: my_cluster
      created_at: "2010-03-21T03:32:39Z"
      expire_at: "2014-06-01T11:43:01Z"
      id: d28cebfe-0faa-4c36-b0a2-fd1b1dace173
      rollforword_till: "2008-01-14T09:10:38Z"
      snapshot:
        class: OnVault
        cluster_name: my_cluster
        created_at: "1988-07-14T08:46:52Z"
        id: Image_4946347
        image_size_mb: 95367.4
        rollforword_till: "1977-04-09T00:50:17Z"
      status: grace
      team: Booking
      type: dev
    - cluster_name: my_cluster
      created_at: "2010-03-21T03:32:39Z"
      expire_at: "2014-06-01T11:43:01Z"
      id: d28cebfe-0faa-4c36-b0a2-fd1b1dace173
      rollforword_till: "2008-01-14T09:10:38Z"
      snapshot:
        class: OnVault
        cluster_name: my_cluster
        created_at: "1988-07-14T08:46:52Z"
        id: Image_4946347
        image_size_mb: 95367.4
        rollforword_till: "1977-04-09T00:50:17Z"
      status: grace
      team: Booking
      type: dev
    - cluster_name: my_cluster
      created_at: "2010-03-21T03:32:39Z"
      expire_at: "2014-06-01T11:43:01Z"
      id: d28cebfe-0faa-4c36-b0a2-fd1b1dace173
      rollforword_till: "2008-01-14T09:10:38Z"
      snapshot:
        class: OnVault
        cluster_name: my_cluster
        created_at: "1988-07-14T08:46:52Z"
        id: Image_4946347
        image_size_mb: 95367.4
        rollforword_till: "1977-04-09T00:50:17Z"
      status: grace
      team: Booking
      type: dev
    items:
      $ref: '#/definitions/Cluster-Branch'
    title: 'Mediatype identifier: application/vnd.cluster-branch+json; type=collection;
      view=default'
    type: array
  Cluster-For-Branching:
    description: A Database Cluster with all the relevant data for creating new cluster
      branch from a snapshot (default view)
    example:
      cluster_type: mysql
      count_of_active_branches: 3
      id: 2710efa2-58b5-49ad-bace-f017ff1754e7
      latest_snapshot_id: Image_4946347
      master_hostname: db-mysql-my-cluster0a.42.wixprod.net
      name: my_cluster
      servers:
      - db-mysql-my-cluster0a.42.wixprod.net
      - db-mysql-my-cluster1b.42.wixprod.net
      - db-mysql-my-cluster0a.96.wixprod.net
      - db-mysql-my-cluster1b.96.wixprod.net
      top_ten_latest_snapshots:
      - class: OnVault
        cluster_name: my_cluster
        created_at: "1988-07-14T08:46:52Z"
        id: Image_4946347
        image_size_mb: 95367.4
        rollforword_till: "1977-04-09T00:50:17Z"
      - class: OnVault
        cluster_name: my_cluster
        created_at: "1988-07-14T08:46:52Z"
        id: Image_4946347
        image_size_mb: 95367.4
        rollforword_till: "1977-04-09T00:50:17Z"
    properties:
      cluster_type:
        description: The cluster type
        enum:
        - mysql
        - mongodb
        example: mysql
        type: string
      count_of_active_branches:
        description: Count of active (none expire) branches
        example: 3
        format: int64
        type: integer
      id:
        description: Uniq Id from Shapherd
        example: 2710efa2-58b5-49ad-bace-f017ff1754e7
        format: uuid
        type: string
      latest_snapshot_id:
        description: The latest snapshot thas was taken to this specific cluster
        example: Image_4946347
        type: string
      master_hostname:
        description: The current RW master of the cluster
        example: db-mysql-my-cluster0a.42.wixprod.net
        format: hostname
        type: string
      name:
        description: Cluster name
        example: my_cluster
        type: string
      servers:
        description: List of server in cluster
        example:
        - db-mysql-my-cluster0a.42.wixprod.net
        - db-mysql-my-cluster1b.42.wixprod.net
        - db-mysql-my-cluster0a.96.wixprod.net
        - db-mysql-my-cluster1b.96.wixprod.net
        items:
          example: wuckert.info.name
          format: hostname
          type: string
        type: array
      top_ten_latest_snapshots:
        $ref: '#/definitions/Cluster-SnapshotCollection'
    title: 'Mediatype identifier: application/vnd.cluster-for-branching+json; view=default'
    type: object
  Cluster-For-BranchingCollection:
    description: Cluster-For-BranchingCollection is the media type for an array of
      Cluster-For-Branching (default view)
    example:
    - cluster_type: mysql
      count_of_active_branches: 3
      id: 2710efa2-58b5-49ad-bace-f017ff1754e7
      latest_snapshot_id: Image_4946347
      master_hostname: db-mysql-my-cluster0a.42.wixprod.net
      name: my_cluster
      servers:
      - db-mysql-my-cluster0a.42.wixprod.net
      - db-mysql-my-cluster1b.42.wixprod.net
      - db-mysql-my-cluster0a.96.wixprod.net
      - db-mysql-my-cluster1b.96.wixprod.net
      top_ten_latest_snapshots:
      - class: OnVault
        cluster_name: my_cluster
        created_at: "1988-07-14T08:46:52Z"
        id: Image_4946347
        image_size_mb: 95367.4
        rollforword_till: "1977-04-09T00:50:17Z"
      - class: OnVault
        cluster_name: my_cluster
        created_at: "1988-07-14T08:46:52Z"
        id: Image_4946347
        image_size_mb: 95367.4
        rollforword_till: "1977-04-09T00:50:17Z"
    - cluster_type: mysql
      count_of_active_branches: 3
      id: 2710efa2-58b5-49ad-bace-f017ff1754e7
      latest_snapshot_id: Image_4946347
      master_hostname: db-mysql-my-cluster0a.42.wixprod.net
      name: my_cluster
      servers:
      - db-mysql-my-cluster0a.42.wixprod.net
      - db-mysql-my-cluster1b.42.wixprod.net
      - db-mysql-my-cluster0a.96.wixprod.net
      - db-mysql-my-cluster1b.96.wixprod.net
      top_ten_latest_snapshots:
      - class: OnVault
        cluster_name: my_cluster
        created_at: "1988-07-14T08:46:52Z"
        id: Image_4946347
        image_size_mb: 95367.4
        rollforword_till: "1977-04-09T00:50:17Z"
      - class: OnVault
        cluster_name: my_cluster
        created_at: "1988-07-14T08:46:52Z"
        id: Image_4946347
        image_size_mb: 95367.4
        rollforword_till: "1977-04-09T00:50:17Z"
    - cluster_type: mysql
      count_of_active_branches: 3
      id: 2710efa2-58b5-49ad-bace-f017ff1754e7
      latest_snapshot_id: Image_4946347
      master_hostname: db-mysql-my-cluster0a.42.wixprod.net
      name: my_cluster
      servers:
      - db-mysql-my-cluster0a.42.wixprod.net
      - db-mysql-my-cluster1b.42.wixprod.net
      - db-mysql-my-cluster0a.96.wixprod.net
      - db-mysql-my-cluster1b.96.wixprod.net
      top_ten_latest_snapshots:
      - class: OnVault
        cluster_name: my_cluster
        created_at: "1988-07-14T08:46:52Z"
        id: Image_4946347
        image_size_mb: 95367.4
        rollforword_till: "1977-04-09T00:50:17Z"
      - class: OnVault
        cluster_name: my_cluster
        created_at: "1988-07-14T08:46:52Z"
        id: Image_4946347
        image_size_mb: 95367.4
        rollforword_till: "1977-04-09T00:50:17Z"
    items:
      $ref: '#/definitions/Cluster-For-Branching'
    title: 'Mediatype identifier: application/vnd.cluster-for-branching+json; type=collection;
      view=default'
    type: array
  Cluster-Snapshot:
    description: A single sky snapshot for a specific cluster (default view)
    example:
      class: OnVault
      cluster_name: my_cluster
      created_at: "1988-07-14T08:46:52Z"
      id: Image_4946347
      image_size_mb: 95367.4
      rollforword_till: "1977-04-09T00:50:17Z"
    properties:
      class:
        description: Sky job class
        enum:
        - snapshot
        - OnVault
        example: OnVault
        type: string
      cluster_name:
        description: Cluster name that the snapshot related to
        example: my_cluster
        type: string
      created_at:
        description: The time that the snapshot was taken
        example: "1988-07-14T08:46:52Z"
        format: date-time
        type: string
      id:
        description: Snapshot image id
        example: Image_4946347
        type: string
      image_size_mb:
        description: Size of the image snapshot in MB
        example: 95367.4
        format: double
        type: number
      rollforword_till:
        description: The latest time that the specific snapshot can be rollforword
          (point in time restor) (not sure if we can calculate this)
        example: "1977-04-09T00:50:17Z"
        format: date-time
        type: string
    title: 'Mediatype identifier: application/vnd.cluster-snapshot+json; view=default'
    type: object
  Cluster-SnapshotCollection:
    description: Cluster-SnapshotCollection is the media type for an array of Cluster-Snapshot
      (default view)
    example:
    - class: OnVault
      cluster_name: my_cluster
      created_at: "1988-07-14T08:46:52Z"
      id: Image_4946347
      image_size_mb: 95367.4
      rollforword_till: "1977-04-09T00:50:17Z"
    - class: OnVault
      cluster_name: my_cluster
      created_at: "1988-07-14T08:46:52Z"
      id: Image_4946347
      image_size_mb: 95367.4
      rollforword_till: "1977-04-09T00:50:17Z"
    - class: OnVault
      cluster_name: my_cluster
      created_at: "1988-07-14T08:46:52Z"
      id: Image_4946347
      image_size_mb: 95367.4
      rollforword_till: "1977-04-09T00:50:17Z"
    items:
      $ref: '#/definitions/Cluster-Snapshot'
    title: 'Mediatype identifier: application/vnd.cluster-snapshot+json; type=collection;
      view=default'
    type: array
  CreateBranchPayload:
    description: CreateBranchPayload defind a new branch request
    example:
      cluster_name: my_cluster
      requestor: iisraelly@wix.com
      snapshot_id: Image_4946347
      team: Booking
      type: dev
    properties:
      cluster_name:
        description: Cluster name that the branch will created from
        example: my_cluster
        type: string
      requestor:
        description: The user that request the branch
        example: iisraelly@wix.com
        format: email
        type: string
      snapshot_id:
        description: Snapshot image id that this branch will create from
        example: Image_4946347
        type: string
      team:
        description: The Team that this branch will create for
        example: Booking
        type: string
      type:
        description: The type of this branch
        enum:
        - dev
        - dr
        example: dev
        type: string
    required:
    - snapshot_id
    - team
    - cluster_name
    - requestor
    - type
    title: CreateBranchPayload
    type: object
  UpdateBranchPayload:
    description: UpdateBranchPayload defind an update request on existing branch
    example:
      comment: Eius ut nemo velit quia.
      operation: expire_now
    properties:
      comment:
        description: Comment of this operation
        example: Eius ut nemo velit quia.
        type: string
      operation:
        description: The operation to be done on the existing branch
        enum:
        - extend_expiration
        - expire_now
        example: expire_now
        type: string
    required:
    - operation
    title: UpdateBranchPayload
    type: object
host: localhost:8081
info:
  description: Set of utiles for creating and managing databases
  title: YAWARAD API for the lazy DBA
  version: ""
paths:
  /v1/cluster-branching/branches:
    get:
      description: Retrive branches
      operationId: cluster-branching#list-branches
      parameters:
      - description: Filter branch by cluster name (contains)
        in: query
        name: cluster_name
        required: false
        type: string
      - description: Filter cluster branch by retriving all branch that was created
          after the giving value (Epoch time in milliseconds)
        in: query
        name: from_time
        required: false
        type: integer
      - default: 1000
        description: limit the result set by giving value (default is 1000 )
        in: query
        maximum: 1000
        name: limit
        required: false
        type: integer
      - description: Filter branches by username of the reuqstor(contains)
        in: query
        name: requestor
        required: false
        type: string
      - description: For pagenation, skip results by giving value
        in: query
        name: skip
        required: false
        type: integer
      - description: Filter branches by branch status
        enum:
        - creating
        - updateing
        - active
        - grace
        - expired
        - deleted
        in: query
        name: status
        required: false
        type: string
      - description: Filter branches by team name (contains)
        in: query
        name: team
        required: false
        type: string
      - description: Filter cluster branch by retriving all branch that was created
          before the giving value (Epoch time in milliseconds)
        in: query
        name: to_time
        required: false
        type: integer
      - description: Filter branches by branch type
        enum:
        - dev
        - dr
        in: query
        name: type
        required: false
        type: string
      produces:
      - application/vnd.cluster-branch+json; type=collection
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/Cluster-BranchCollection'
      summary: list-branches cluster-branching
      tags:
      - cluster-branching
    post:
      description: Create a new branch
      operationId: cluster-branching#create-branch
      parameters:
      - description: CreateBranchPayload defind a new branch request
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/CreateBranchPayload'
      produces:
      - application/vnd.branch-request+json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/Branch-Request'
        "400":
          description: Bad Request
        "422":
          description: Unprocessable Entity
      summary: create-branch cluster-branching
      tags:
      - cluster-branching
    put:
      description: Create a new branch
      operationId: cluster-branching#update-branch
      parameters:
      - description: UpdateBranchPayload defind an update request on existing branch
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/UpdateBranchPayload'
      produces:
      - application/vnd.branch-request+json
      responses:
        "202":
          description: Accepted
          schema:
            $ref: '#/definitions/Branch-Request'
        "400":
          description: Bad Request
        "422":
          description: Unprocessable Entity
      summary: update-branch cluster-branching
      tags:
      - cluster-branching
  /v1/cluster-branching/branches/{branch_id}:
    get:
      description: Retrieve single cluster branch by id.
      operationId: cluster-branching#show-branche
      parameters:
      - description: The branch id to show
        in: path
        name: branch_id
        required: true
        type: string
      produces:
      - application/vnd.cluster-for-branching+json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/Cluster-For-Branching'
        "404":
          description: If branch id does not exists
      summary: show-branche cluster-branching
      tags:
      - cluster-branching
  /v1/cluster-branching/clusters:
    get:
      description: Retrieve all Available cluster that can be branch.
      operationId: cluster-branching#list-clusters
      parameters:
      - enum:
        - mysql
        - mongodb
        in: query
        name: cluster_type
        required: false
        type: string
      produces:
      - application/vnd.cluster-for-branching+json; type=collection
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/Cluster-For-BranchingCollection'
      summary: list-clusters cluster-branching
      tags:
      - cluster-branching
  /v1/cluster-branching/clusters/{cluster_name}:
    get:
      description: Retrieve single cluster to be branch by name.
      operationId: cluster-branching#show-cluster
      parameters:
      - description: The cluster name to show
        in: path
        name: cluster_name
        required: true
        type: string
      produces:
      - application/vnd.cluster-for-branching+json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/Cluster-For-Branching'
        "404":
          description: If cluster name does not exists
      summary: show-cluster cluster-branching
      tags:
      - cluster-branching
  /v1/cluster-branching/clusters/{cluster_name}/branches:
    get:
      description: Retrive branches of a specific cluster
      operationId: cluster-branching#list-cluster-branches
      parameters:
      - description: The cluster name to show
        in: path
        name: cluster_name
        required: true
        type: string
      - description: Filter cluster branch by retriving all branch that was created
          after the giving value (Epoch time in milliseconds)
        in: query
        name: from_time
        required: false
        type: integer
      - default: 1000
        description: limit the result set by giving value (default is 1000 )
        in: query
        maximum: 1000
        name: limit
        required: false
        type: integer
      - description: Filter branches by username of the reuqstor(contains)
        in: query
        name: requestor
        required: false
        type: string
      - description: For pagenation, skip results by giving value
        in: query
        name: skip
        required: false
        type: integer
      - description: Filter branches by branch status
        enum:
        - creating
        - updateing
        - active
        - grace
        - expired
        - deleted
        in: query
        name: status
        required: false
        type: string
      - description: Filter branches by team name (contains)
        in: query
        name: team
        required: false
        type: string
      - description: Filter cluster branch by retriving all branch that was created
          before the giving value (Epoch time in milliseconds)
        in: query
        name: to_time
        required: false
        type: integer
      - description: Filter branches by branch type
        enum:
        - dev
        - dr
        in: query
        name: type
        required: false
        type: string
      produces:
      - application/vnd.cluster-branch+json; type=collection
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/Cluster-BranchCollection'
        "404":
          description: If cluster name does not exists
      summary: list-cluster-branches cluster-branching
      tags:
      - cluster-branching
  /v1/cluster-branching/clusters/{cluster_name}/snapshots:
    get:
      description: Retrive snapshots of a specific cluster
      operationId: cluster-branching#list-cluster-snapshots
      parameters:
      - description: The cluster name to show
        in: path
        name: cluster_name
        required: true
        type: string
      - description: Filter cluster snapshot by retriving all snapshot that was created
          after the giving value (Epoch time in milliseconds)
        in: query
        name: from_time
        required: false
        type: integer
      - default: 1000
        description: limit the result set by giving value (default is 1000)
        in: query
        maximum: 1000
        name: limit
        required: false
        type: integer
      - description: For pagenation, skip results by giving value
        in: query
        name: skip
        required: false
        type: integer
      - description: Filter cluster snapshot by retriving all snapshot that was created
          before the giving value (Epoch time in milliseconds)
        in: query
        name: to_time
        required: false
        type: integer
      produces:
      - application/vnd.cluster-snapshot+json; type=collection
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/Cluster-SnapshotCollection'
        "404":
          description: If cluster name does not exists
      summary: list-cluster-snapshots cluster-branching
      tags:
      - cluster-branching
  /v1/cluster-branching/requests:
    get:
      description: Retrive requests
      operationId: cluster-branching#list-requests
      parameters:
      - description: Filter request by cluster name (contains)
        in: query
        name: cluster_name
        required: false
        type: string
      - description: Filter requests that was created after the giving value (Epoch
          time in milliseconds)
        in: query
        name: from_time
        required: false
        type: integer
      - default: 1000
        description: limit the result set by giving value (default is 1000 )
        in: query
        maximum: 1000
        name: limit
        required: false
        type: integer
      - description: Filter branches by username of the reuqstor(contains)
        in: query
        name: requestor
        required: false
        type: string
      - description: For pagenation, skip results by giving value
        in: query
        name: skip
        required: false
        type: integer
      - description: Filter requests by request state
        enum:
        - running
        - finish_successfully
        - failed
        in: query
        name: state
        required: false
        type: string
      - description: Filter request that was created before the giving value (Epoch
          time in milliseconds)
        in: query
        name: to_time
        required: false
        type: integer
      - description: Filter request by request type
        enum:
        - create_branch
        - update_branch
        - extend_expration
        - expire_now
        in: query
        name: type
        required: false
        type: string
      produces:
      - application/vnd.branch-request+json; type=collection
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/Branch-RequestCollection'
      summary: list-requests cluster-branching
      tags:
      - cluster-branching
  /v1/cluster-branching/requests/{request_id}:
    get:
      description: Retrieve single request by id.
      operationId: cluster-branching#show-request
      parameters:
      - description: The request id to show
        in: path
        name: request_id
        required: true
        type: string
      produces:
      - application/vnd.branch-request+json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/Branch-Request'
        "404":
          description: If request id does not exists
      summary: show-request cluster-branching
      tags:
      - cluster-branching
  /v1/cluster-branching/requests/{request_id}/tasks:
    get:
      description: Retrive request tasks
      operationId: cluster-branching#list-request-tasks
      parameters:
      - description: The request id to show
        in: path
        name: request_id
        required: true
        type: string
      produces:
      - application/vnd.branch-request-task+json; type=collection
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/Branch-Request-TaskCollection'
      summary: list-request-tasks cluster-branching
      tags:
      - cluster-branching
  /v1/cluster-branching/requests/{request_id}/tasks/{task_name}:
    get:
      description: Retrive a single request task by name
      operationId: cluster-branching#show-request-task
      parameters:
      - description: The request id to show
        in: path
        name: request_id
        required: true
        type: string
      - description: The request task name to show
        in: path
        name: task_name
        required: true
        type: string
      produces:
      - application/vnd.branch-request-task+json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/Branch-Request-Task'
      summary: show-request-task cluster-branching
      tags:
      - cluster-branching
  /v1/cluster-branching/requests/{request_id}/tasks/{task_name}/log:
    get:
      description: Retrive a single request task by id
      operationId: cluster-branching#show-request-task-log
      parameters:
      - description: The request id to show
        in: path
        name: request_id
        required: true
        type: string
      - description: The request task name to show
        in: path
        name: task_name
        required: true
        type: string
      produces:
      - application/vnd.branch-request-task+json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/Branch-Request-Task'
      summary: show-request-task-log cluster-branching
      tags:
      - cluster-branching
  /v1/cluster-branching/requests/{request_id}/tasks/{task_name}/log/ws:
    get:
      description: Retrive a single request task by id
      operationId: cluster-branching#subscribe-request-task-log-stream
      parameters:
      - description: The request id to show
        in: path
        name: request_id
        required: true
        type: string
      - description: The request task name to show
        in: path
        name: task_name
        required: true
        type: string
      responses:
        "101":
          description: Switching Protocols
      schemes:
      - ws
      summary: subscribe-request-task-log-stream cluster-branching
      tags:
      - cluster-branching
  /v1/cluster-branching/requests/{request_id}/ws:
    get:
      description: Subscribe to any changes that will happend to a single request
        by websocket
      operationId: cluster-branching#subscribe-request-changes
      parameters:
      - description: The request id to show
        in: path
        name: request_id
        required: true
        type: string
      responses:
        "101":
          description: Switching Protocols
      schemes:
      - ws
      summary: subscribe-request-changes cluster-branching
      tags:
      - cluster-branching
  /v1/cluster-branching/snapshots:
    get:
      description: Retrive snapshots
      operationId: cluster-branching#list-snapshots
      parameters:
      - description: Filter by cluster name (contains)
        in: query
        name: cluster_name
        required: false
        type: string
      - description: Filter cluster snapshot by retriving all snapshot that was created
          after the giving value (Epoch time in milliseconds)
        in: query
        name: from_time
        required: false
        type: integer
      - default: 1000
        description: limit the result set by giving value (default is 1000)
        in: query
        maximum: 1000
        name: limit
        required: false
        type: integer
      - description: For pagenation, skip results by giving value
        in: query
        name: skip
        required: false
        type: integer
      - description: Filter cluster snapshot by retriving all snapshot that was created
          before the giving value (Epoch time in milliseconds)
        in: query
        name: to_time
        required: false
        type: integer
      produces:
      - application/vnd.cluster-snapshot+json; type=collection
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/Cluster-SnapshotCollection'
      summary: list-snapshots cluster-branching
      tags:
      - cluster-branching
  /v1/cluster-branching/snapshots/{snapshot_id}:
    get:
      description: Retrieve single cluster snapshot by id.
      operationId: cluster-branching#show-snapshot
      parameters:
      - description: The snapshot id to show
        in: path
        name: snapshot_id
        required: true
        type: string
      produces:
      - application/vnd.cluster-for-branching+json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/Cluster-For-Branching'
        "404":
          description: If snapshot id does not exists
      summary: show-snapshot cluster-branching
      tags:
      - cluster-branching
  /v1/cluster-branching/snapshots/{snapshot_id}/branches:
    get:
      description: Retrive branches that was created from a specific snapshot
      operationId: cluster-branching#list-snapshot-branches
      parameters:
      - description: Filter cluster branch by retriving all branch that was created
          after the giving value (Epoch time in milliseconds)
        in: query
        name: from_time
        required: false
        type: integer
      - default: 1000
        description: limit the result set by giving value (default is 1000 )
        in: query
        maximum: 1000
        name: limit
        required: false
        type: integer
      - description: Filter branches by username of the reuqstor(contains)
        in: query
        name: requestor
        required: false
        type: string
      - description: For pagenation, skip results by giving value
        in: query
        name: skip
        required: false
        type: integer
      - description: The snapshot id to show
        in: path
        name: snapshot_id
        required: true
        type: string
      - description: Filter branches by branch status
        enum:
        - creating
        - updateing
        - active
        - grace
        - expired
        - deleted
        in: query
        name: status
        required: false
        type: string
      - description: Filter branches by team name (contains)
        in: query
        name: team
        required: false
        type: string
      - description: Filter cluster branch by retriving all branch that was created
          before the giving value (Epoch time in milliseconds)
        in: query
        name: to_time
        required: false
        type: integer
      - description: Filter branches by branch type
        enum:
        - dev
        - dr
        in: query
        name: type
        required: false
        type: string
      produces:
      - application/vnd.cluster-branch+json; type=collection
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/Cluster-BranchCollection'
        "404":
          description: If snapshot id does not exists
      summary: list-snapshot-branches cluster-branching
      tags:
      - cluster-branching
produces:
- application/json
- application/xml
- application/gob
- application/x-gob
responses:
  BadRequest:
    description: Bad Request
  SwitchingProtocols:
    description: Switching Protocols
  UnprocessableEntity:
    description: Unprocessable Entity
swagger: "2.0"
